(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{109:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(29),o=n.n(r),s=n(33),i=n(8),u=n(14),j=n(55),l=n(70),d=n(41),b=n.n(d),h=function(){var e=Object(l.a)(Object(j.a)().mark((function e(t,n){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("auth/login",{username:t,password:n}).then((function(e){return e.data.accessToken&&localStorage.setItem("data",JSON.stringify(e.data)),e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O={login:h,logout:function(){localStorage.removeItem("data")},getCurrentUser:function(){return JSON.parse(localStorage.getItem("user"))}},m={on:function(e,t){document.addEventListener(e,(function(e){return t(e.detail)}))},dispatch:function(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t}))},remove:function(e,t){document.removeEventListener(e,t)}},p=n(158),x=n(159),f=n(160),v=n(161),g=n(155),w=n(162),S=n(156),k=n(153),I=n(154),y=n(2),C=function(){var e=Object(u.f)(),t=Object(c.useState)(""),n=Object(i.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)(""),s=Object(i.a)(o,2),j=s[0],l=s[1],d=Object(c.useState)(!1),b=Object(i.a)(d,2),h=(b[0],b[1]),m=Object(c.useState)(""),C=Object(i.a)(m,2),E=(C[0],C[1]);return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(p.a,{container:!0,justifyContent:"center",alignItems:"center",children:Object(y.jsxs)(x.a,{children:[Object(y.jsx)(f.a,{children:Object(y.jsx)(v.a,{children:"Login"})}),Object(y.jsx)(f.a,{children:Object(y.jsx)(g.a,{label:"Username",helperText:"Nunca compartir tu nombre de usuario.",variant:"standard",required:!0,value:a,onChange:function(e){var t=e.target.value;r(t)},InputProps:{startAdornment:Object(y.jsx)(w.a,{position:"start",children:Object(y.jsx)(k.a,{})})}})}),Object(y.jsx)(f.a,{children:Object(y.jsx)(g.a,{label:"Password",helperText:"Nunca compartir tu nombre de contrase\xf1a.",variant:"standard",required:!0,value:j,onChange:function(e){var t=e.target.value;l(t)},InputProps:{startAdornment:Object(y.jsx)(w.a,{position:"start",children:Object(y.jsx)(I.a,{})})}})}),Object(y.jsx)(f.a,{children:Object(y.jsx)(S.a,{onClick:function(t){t.preventDefault(),E(""),h(!1),O.login(a,j).then((function(){e("/schedule"),window.location.reload()}),(function(e){h(!0),E("message"),console.log(e)}))},children:"Login In"})})]})})})},E=function(){return Object(y.jsx)("h1",{children:"Schedule"})},L=function(){var e=Object(c.useState)(!0),t=Object(i.a)(e,2),n=(t[0],t[1]),a=Object(c.useState)(!0),r=Object(i.a)(a,2),o=(r[0],r[1]),j=Object(c.useState)(void 0),l=Object(i.a)(j,2),d=(l[0],l[1]);Object(c.useEffect)((function(){var e=O.getCurrentUser();return e&&(d(e),o(e),n(e)),m.on("logout",(function(){b()})),function(){m.remove("logout")}}),[]);var b=function(){O.logout(),d(void 0),o(0),n(0)};return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{children:Object(y.jsxs)("nav",{children:[Object(y.jsx)("li",{children:Object(y.jsx)(s.b,{to:"/",children:"Home"})}),Object(y.jsx)("li",{children:Object(y.jsx)(s.b,{to:"schedule",children:"schedule"})})]})}),Object(y.jsx)("div",{children:Object(y.jsxs)(u.c,{children:[Object(y.jsx)(u.a,{path:"/",element:Object(y.jsx)(C,{})}),Object(y.jsx)(u.a,{path:"/schedule",element:Object(y.jsx)(E,{})})]})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));b.a.defaults.baseURL="https://enigmatic-sea-26384.herokuapp.com/api",o.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(s.a,{children:Object(y.jsx)(L,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[109,1,2]]]);
//# sourceMappingURL=main.cb457d35.chunk.js.map